<!DOCTYPE html>
<html lang="en">
<head>
          <meta charset="UTF-8">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <title>API (Application Programing Interface - Part-02)</title>
          <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
</head>
<body>
          <div class="text-center">
                    <div class="spinner-border" role="status">
                      <span class="visually-hidden">Loading...</span>
                    </div>
                  </div>
          <table class="table">
                    <thead>
                      <tr>
                        <th scope="col">ID</th>
                        <th scope="col">Name</th>
                        <th scope="col">Username</th>
                        <th scope="col">Email</th>
                        <th scope="col">Address</th>
                        <th scope="col">Phone</th>
                        <th scope="col">Website</th>
                        <th scope="col">Company</th>
                      </tr>
                    </thead>
                    <tbody>
                      
                    </tbody>
                  </table>
          <script>
                    // lets create our own i.e user define class

                    // class MyClass{
                    //           // 1. property

                    //           // 2. cunstruction

                    //           // 3. method
                    //           sum(a,b){
                    //                     return a+b
                    //           }
                    // }
                    // // lets create a object from the MyClass()
                    //  let myObj = new MyClass()

                    //  // how you can access method
                    // let result =  myObj.sum(10,20)
                    // console.log(result);
          </script>
          <script>
                    // API url
                    //  https://jsonplaceholder.typicode.com/users

                    // Function Callback
 
                    // function define 

                    // function getUserInfo(object ,cbfn){ // object or cbfn formal argument

                    // cbfn(object)

                    // lets create xhr object from httpsrequest class
                    

                    // let object = new classname
                    //  let xhr = new XMLHttpRequest()  //  XMLHttpRequest predefine class

                    // }
                    // Function calling
                    // getUserInfo({url : 'https://jsonplaceholder.typicode.com/users'} ,  function(response){
                              // console.log(response);
                               // actual argument
                    // })
                    // ============================================ 
                    
                    // function callback
                    // 1. function define
                    function getUserInfo(obj,cbfn){

                              // lets create xhr object from httpsrequest class
                              let xhr = new XMLHttpRequest()  //  XMLHttpRequest is predefine class
                              xhr.open(obj.method,obj.url)
                              xhr.send()
                              
                              xhr.onload = function(){
                                        console.log(xhr);
                                        // console.log(xhr.responseText);
                                        cbfn(xhr.responseText)

                              }

                              
                    } 
                    // function calling
                    getUserInfo({url:"https://jsonplaceholder.typicode.com/users",method:'GET'}, function(reponse){
                              console.log(typeof reponse);
                              // console.log(typeof res);
                              reponse = JSON.parse(reponse)
                              console.log(typeof reponse);
                              let tr = ""
                              reponse.forEach((currentElement,index,arr) => {
                                        console.log(currentElement);
                                        console.log(currentElement.name);
                                        tr = tr + ` <tr>
                                                            <th scope="row">`+currentElement.id+`</th>
                                                            <td>`+currentElement.name+`</td>
                                                            <td>`+currentElement.username+`</td>
                                                            <td>`+currentElement.email+`</td>
                                                            <td>`+currentElement.address+`</td>
                                                            <td>`+currentElement.phone+`</td>
                                                            <td>`+currentElement.website+`</td>
                                                            <td>`+currentElement.company+`</td>
                                                       </tr>`
                              });
                              console.log(tr);
                              document.querySelector('table > tbody').innerHTML=tr
                              
                    });

          </script>
          <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script> 
</body>
</html>